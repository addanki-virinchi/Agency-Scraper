<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Maps with Smooth Scroll-to-Zoom</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        
        .header {
            background-color: #4285f4;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .content {
            padding: 20px;
            height: 200px;
            overflow-y: auto;
            background-color: #f5f5f5;
        }
        
        .map-container {
            position: relative;
            height: 600px;
            width: 100%;
            border: 2px solid #ddd;
            margin-top: 20px;
        }
        
        #map {
            height: 100%;
            width: 100%;
        }
        
        .instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            z-index: 1000;
            max-width: 300px;
        }
        
        .zoom-indicator {
            position: absolute;
            bottom: 30px;
            right: 30px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 8px 12px;
            border-radius: 20px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            z-index: 1000;
            font-weight: bold;
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Google Maps with Smooth Scroll-to-Zoom</h1>
    </div>
    
    <div class="content">
        <h2>Scrollable Content Area</h2>
        <p>This is a scrollable content area to demonstrate that the map's scroll-to-zoom functionality doesn't interfere with the main page scrolling.</p>
        <p>Try scrolling this content area with your mouse wheel - it should work normally.</p>
        
        <h3>Instructions:</h3>
        <ul>
            <li>Hover your mouse over the map below</li>
            <li>Use your mouse wheel or trackpad to zoom in and out</li>
            <li>The map will zoom smoothly without affecting the page scroll</li>
            <li>When your cursor is outside the map, normal page scrolling will work</li>
        </ul>
        
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        
        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        
        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
    </div>
    
    <div class="map-container">
        <div class="instructions">
            <strong>Scroll to Zoom:</strong><br>
            Hover over the map and use your mouse wheel or trackpad to zoom in and out smoothly.
        </div>
        <div class="zoom-indicator" id="zoomIndicator">Zoom: <span id="zoomLevel">10</span></div>
        <div id="map"></div>
    </div>

    <script>
        let map;
        let isMouseOverMap = false;
        let zoomTimeout;
        let smoothZoomAnimation = null;
        
        // Initialize the map
        function initMap() {
            // Default location (New Delhi)
            const defaultLocation = { lat: 28.6139, lng: 77.2090 };
            
            // Create the map instance
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: defaultLocation,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                scrollwheel: false, // Disable default scroll behavior
                gestureHandling: 'none' // Disable default gesture handling
            });
            
            // Add some markers for demonstration
            const locations = [
                { lat: 28.6139, lng: 77.2090, title: "New Delhi" },
                { lat: 28.6353, lng: 77.2250, title: "Connaught Place" },
                { lat: 28.6315, lng: 77.2167, title: "India Gate" },
                { lat: 28.5562, lng: 77.2001, title: "Hauz Khas" }
            ];
            
            locations.forEach(location => {
                new google.maps.Marker({
                    position: { lat: location.lat, lng: location.lng },
                    map: map,
                    title: location.title
                });
            });
            
            // Set up event listeners for custom scroll handling
            setupScrollHandling();
            
            // Update zoom indicator when zoom changes
            map.addListener('zoom_changed', updateZoomIndicator);
        }
        
        // Set up custom scroll handling
        function setupScrollHandling() {
            const mapElement = document.getElementById('map');
            const zoomIndicator = document.getElementById('zoomIndicator');
            
            // Track mouse position over the map
            mapElement.addEventListener('mouseenter', () => {
                isMouseOverMap = true;
                zoomIndicator.style.display = 'block';
                updateZoomIndicator();
            });
            
            mapElement.addEventListener('mouseleave', () => {
                isMouseOverMap = false;
                zoomIndicator.style.display = 'none';
            });
            
            // Handle wheel events for smooth zooming
            mapElement.addEventListener('wheel', handleWheelEvent, { passive: false });
        }
        
        // Handle wheel events for smooth zooming
        function handleWheelEvent(event) {
            if (!isMouseOverMap) return;
            
            // Prevent default scroll behavior
            event.preventDefault();
            
            // Clear any pending zoom animation
            if (smoothZoomAnimation) {
                clearTimeout(smoothZoomAnimation);
            }
            
            // Determine zoom direction based on wheel delta
            const delta = event.deltaY;
            const zoomDirection = delta > 0 ? -1 : 1;
            
            // Calculate new zoom level
            const currentZoom = map.getZoom();
            const newZoom = Math.max(1, Math.min(20, currentZoom + zoomDirection));
            
            // If zoom level would change, animate it
            if (newZoom !== currentZoom) {
                smoothZoomTo(newZoom);
            }
        }
        
        // Smooth zoom animation
        function smoothZoomTo(targetZoom) {
            const currentZoom = map.getZoom();
            const zoomStep = targetZoom > currentZoom ? 0.5 : -0.5;
            
            function animateZoom() {
                const currentZoom = map.getZoom();
                
                if ((zoomStep > 0 && currentZoom < targetZoom) || 
                    (zoomStep < 0 && currentZoom > targetZoom)) {
                    
                    map.setZoom(currentZoom + zoomStep);
                    updateZoomIndicator();
                    
                    smoothZoomAnimation = setTimeout(animateZoom, 50);
                } else {
                    // Ensure we reach the exact target zoom
                    map.setZoom(targetZoom);
                    updateZoomIndicator();
                    smoothZoomAnimation = null;
                }
            }
            
            animateZoom();
        }
        
        // Update the zoom indicator
        function updateZoomIndicator() {
            const zoomLevel = document.getElementById('zoomLevel');
            if (zoomLevel) {
                zoomLevel.textContent = map.getZoom();
            }
        }
        
        // Handle trackpad gestures (pinch to zoom simulation)
        document.addEventListener('gesturestart', function(e) {
            if (isMouseOverMap) {
                e.preventDefault();
            }
        });
        
        document.addEventListener('gesturechange', function(e) {
            if (isMouseOverMap) {
                e.preventDefault();
                
                // Calculate scale from gesture
                const scale = e.scale;
                const currentZoom = map.getZoom();
                
                // Convert scale to zoom change
                let newZoom = currentZoom;
                if (scale > 1.05) {
                    newZoom = Math.min(20, currentZoom + 1);
                } else if (scale < 0.95) {
                    newZoom = Math.max(1, currentZoom - 1);
                }
                
                if (newZoom !== currentZoom) {
                    smoothZoomTo(newZoom);
                }
            }
        });
        
        document.addEventListener('gestureend', function(e) {
            if (isMouseOverMap) {
                e.preventDefault();
            }
        });
    </script>
    
    <!-- Load the Google Maps JavaScript API -->
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
    </script>
</body>
</html>